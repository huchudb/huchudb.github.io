<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>후추 관리자</title>
  <!-- 최소 헤더: CSS + admin.js 만 -->
  <link rel="stylesheet" href="/assets/styles.css?v=20251112-fix2"/>
  <script src="./admin.js?v=20251112-b1" defer></script>

  <style>
    /* 관리자 전용 약간의 레이아웃 보강 */
    .admin-wrap{max-width:1000px;margin:20px auto;background:#fff;border:1px solid var(--line);border-radius:14px;padding:16px}
    .admin-h{margin:0 0 12px;font:800 20px/1.2 Arial;color:#0b2a66}
    .admin-grid{display:grid;grid-template-columns:1fr;gap:16px}
    .card{border:1px solid var(--line);border-radius:12px;padding:14px;background:#fff}
    .card h3{margin:0 0 10px;font:800 16px/1.2 Arial;color:#0b2a66}
    .row{display:grid;grid-template-columns:140px 1fr;gap:10px;align-items:center;margin-bottom:10px}
    .row label{font:700 13px/1.2 Arial;color:#1a365d}
    input[type="text"],input[type="url"],input[type="date"],input[type="month"],input[type="number"],select,textarea{width:100%;padding:9px;border:1px solid #ccc;border-radius:8px;font-size:14px;background:#fff}
    .btn-row{display:flex;gap:8px;flex-wrap:wrap}
    .tbl{width:100%;border-collapse:collapse;margin-top:10px}
    .tbl th,.tbl td{border:1px solid var(--line);padding:8px;font-size:13px}
    .tbl th{background:#f8fafc;text-align:left}
    .mini{font-size:12px;color:#64748B}
    .muted{color:#667085}
    .form-help{font-size:12px;color:#64748B;margin:-6px 0 8px}
    .two-cols{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media(max-width:820px){ .row{grid-template-columns:1fr} .two-cols{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <div class="admin-wrap">
    <h1 class="admin-h">후추 관리자</h1>
    <div class="mini">※ 현재는 <b>localStorage</b>에 저장합니다. 배포 시 <code>admin.js</code>의 Storage 어댑터를 API 연동으로 교체하세요.</div>

    <div class="admin-grid">
      <!-- 공지 관리 -->
      <section class="card">
        <h3>공지사항 관리</h3>
        <div class="two-cols">
          <div>
            <div class="row"><label>제목</label><input id="nTitle" type="text" placeholder="[이벤트] 신규 사용자 혜택 안내"></div>
            <div class="row"><label>이미지 URL</label><input id="nImg" type="url" placeholder="https://.../banner.jpg"></div>
            <div class="row"><label>링크 URL</label><input id="nLink" type="url" placeholder="https://..."></div>
          </div>
          <div>
            <div class="row"><label>게시일</label><input id="nDate" type="date"></div>
            <div class="row"><label>활성</label>
              <select id="nActive"><option value="true" selected>활성(노출)</option><option value="false">비활성(비노출)</option></select>
            </div>
            <div class="btn-row">
              <button class="btn btn-primary" id="nSave">추가/수정 저장</button>
              <button class="btn btn-secondary" id="nReset">입력 초기화</button>
            </div>
            <div class="form-help">* 추가 후 아래 목록에서 선택하면 수정 모드로 전환됩니다.</div>
          </div>
        </div>

        <table class="tbl" id="nTable">
          <thead><tr><th style="width:32px">#</th><th>제목</th><th>게시일</th><th>활성</th><th style="width:120px">작업</th></tr></thead>
        <tbody></tbody>
        </table>
      </section>

      <!-- 통계 관리 -->
      <section class="card">
        <h3>통계(월별) 관리</h3>
        <div class="row"><label>기준월</label><input id="sMonth" type="month" value="2025-11"></div>

        <div class="two-cols">
          <div>
            <div class="row"><label>누적대출금액</label><input id="sLoan" type="text" placeholder="원 단위 숫자(쉼표 허용)"></div>
            <div class="row"><label>누적상환금액</label><input id="sRepay" type="text" placeholder="원 단위 숫자(쉼표 허용)"></div>
            <div class="row"><label>대출잔액</label><input id="sBal" type="text" placeholder="원 단위 숫자(쉼표 허용)"></div>
          </div>
          <div class="mini">
            * 표시는 자동으로 <b>만원 반올림</b> 후 <b>조/억/만원</b> 형식으로 변환됩니다.<br>
            * 전월 데이터(kpi2_prev, kpi1_prev)는 <b>자동 생성</b> 옵션을 권장합니다.
          </div>
        </div>

        <div class="mini" style="margin:6px 0 10px">
          상품유형별 잔액(원) — 금액 또는 <b>퍼센트(예: 12%)</b> 입력 가능.<br>
          퍼센트 입력 시 <b>대출잔액 × 퍼센트</b>로 자동 계산되어 금액으로 저장됩니다.
        </div>
        <div class="two-cols">
          <div>
            <div class="row"><label>부동산PF</label><input id="pPF" type="text" placeholder="예: 1,000,000,000 또는 12%"></div>
            <div class="row"><label>부동산담보</label><input id="pSecured" type="text" placeholder="예: 2,000,000,000 또는 38%"></div>
            <div class="row"><label>어음·매출채권담보</label><input id="pNote" type="text" placeholder="예: 500,000,000 또는 10%"></div>
          </div>
          <div>
            <div class="row"><label>기타담보</label><input id="pOther" type="text" placeholder="예: 300,000,000 또는 5%"></div>
            <div class="row"><label>개인신용</label><input id="pPersonal" type="text" placeholder="예: 400,000,000 또는 8%"></div>
            <div class="row"><label>법인신용</label><input id="pCorp" type="text" placeholder="예: 200,000,000 또는 3%"></div>
          </div>
        </div>

        <div class="row"><label>전월 데이터 자동 생성</label>
          <select id="sPrevAuto"><option value="auto" selected>자동(현재 값의 -3% 가정)</option><option value="manual">수동 입력</option></select>
        </div>

        <div class="btn-row">
          <button class="btn btn-primary" id="sSave">월 데이터 저장</button>
          <button class="btn btn-secondary" id="sLoad">불러오기</button>
        </div>

        <table class="tbl" id="sTable" style="margin-top:12px">
          <thead><tr><th>기준월</th><th>누적대출</th><th>누적상환</th><th>잔액</th><th style="width:120px">작업</th></tr></thead>
          <tbody></tbody>
        </table>
      </section>
    </div>
  </div>
</body>
</html>

