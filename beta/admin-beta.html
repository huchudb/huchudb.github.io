<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>후추 | 온투업(P2P) 관리자 (베타)</title>
  <meta name="description" content="온투업 담보대출 통계 및 온투업체 정보를 관리하는 베타 관리자 페이지입니다.">

  <link rel="stylesheet" href="/assets/styles.css?v=20251117-beta" />
  <script type="module" src="/assets/admin-beta.js?v=20251211-beta"></script>
</head>
<body class="beta-body">

  <!-- 상단 헤더: 베타 홈과 동일한 구조 -->
  <header class="huchu-header beta-header" role="banner">
    <div class="huchu-header__inner beta-header__inner">
      <!-- 로고 -->
      <a href="/" class="huchu-logo" aria-label="후추 Huchu 홈">
        <img class="logo-img" src="/assets/logo/huchu-logo.png" alt="후추 로고" />
        <span class="logo-fallback">
          <span class="logo-mark">%</span>
          <span class="logo-text">후추 Huchu</span>
        </span>
      </a>

      <!-- MENU + 드롭다운 -->
      <button id="betaMenuToggle"
              class="beta-menu-toggle"
              type="button"
              aria-haspopup="true"
              aria-expanded="false">
        <span class="beta-menu-toggle__label">MENU</span>
      </button>

      <div id="betaMenuPanel" class="beta-menu-panel hide">
        <a class="beta-menu-link" href="/beta/">온투업 대출통계</a>
        <a class="beta-menu-link" href="/products/">온투업 대출상품정보</a>
        <a class="beta-menu-link" href="/">담보대출 계산기</a>
        <a class="beta-menu-link" href="/company.html">회사소개</a>
        <a class="beta-menu-link" href="/contact.html">광고문의</a>
        <a class="beta-menu-link" href="/admin-beta.html">관리자(베타)</a>
      </div>
    </div>
  </header>

  <main class="beta-main">
    <div class="beta-inner">

      <!-- 인트로 -->
      <section class="beta-section">
        <div class="beta-section__header">
          <div class="beta-section__title-wrap">
            <span class="icon-dot dot-gold"></span>
            <h1 class="beta-section__title">온투업 베타 관리자</h1>
          </div>
        </div>
        <div class="beta-card beta-card--wide">
          <p style="margin:0 0 4px;font-size:13px;color:#4b5563;">
            이 페이지에서 <strong>온투업 대출 통계</strong>와
            <strong>온투업체 정보(네비게이션 매칭 기준)</strong>를 설정할 수 있습니다.
          </p>
          <p style="margin:0;font-size:12px;color:#9ca3af;">
            · 저장된 정보는 베타 통계 페이지(/beta)와 &ldquo;후추 네비게이션&rdquo;에서 사용됩니다.<br />
            · 현재는 서버 API + 브라우저 <code>localStorage</code> 기준 테스트 용도로 동작합니다.
          </p>
        </div>
      </section>

      <!-- 탭 버튼 -->
      <section class="beta-section">
        <div class="beta-card beta-card--wide">
          <div class="admin-tab-header">
            <button type="button"
                    class="admin-tab-btn is-active"
                    data-admin-tab-target="stats">
              온투업 통계 저장
            </button>
            <button type="button"
                    class="admin-tab-btn"
                    data-admin-tab-target="lenders">
              온투업체 정보 등록
            </button>
          </div>
        </div>
      </section>

      <!-- 탭 패널: 1) 온투업 통계 저장 -->
      <section class="beta-section"
               id="adminOntuStatsSection"
               data-admin-tab-panel="stats">
        <div class="beta-section__header">
          <div class="beta-section__title-wrap">
            <span class="icon-dot dot-gold"></span>
            <h2 class="beta-section__title">온투업 대출 통계 (중앙기록관리)</h2>
          </div>
        </div>

        <div class="beta-card beta-card--wide">

          <!-- 기준월: 캘린더 선택 시 자동 로드 -->
          <div class="admin-stats-month-row">
            <label class="admin-stats-month-label">
              조회년월
              <input
                type="month"
                id="statsMonth"
                class="admin-input admin-input-month"
              />
            </label>
            <p class="admin-stats-month-help">
              · 년/월을 선택하면 하단 통계 값이 자동으로 불러옵니다.
              (저장 시 월별로 <code>ontu-stats</code> API + <code>localStorage</code>에 보관)
            </p>
          </div>

          <!-- 대출현황 summary -->
          <div class="admin-card" style="margin-top:10px;">
            <h3 class="admin-subtitle">[대출현황]</h3>
            <div class="admin-stats-grid">
              <label class="admin-field">
                금융위 등록 온투업체수
                <input
                  type="number"
                  id="statsRegisteredFirms"
                  min="0"
                  class="admin-input"
                />
              </label>
              <label class="admin-field">
                데이터 수집 온투업체수
                <input
                  type="number"
                  id="statsDataFirms"
                  min="0"
                  class="admin-input"
                />
              </label>
              <label class="admin-field">
                누적대출금액 (원)
                <input
                  type="text"
                  id="statsTotalLoan"
                  data-type="money"
                  class="admin-input"
                  placeholder="예) 18358007760000"
                />
              </label>
              <label class="admin-field">
                누적상환금액 (원)
                <input
                  type="text"
                  id="statsTotalRepaid"
                  data-type="money"
                  class="admin-input"
                  placeholder="예) 16924144010000"
                />
              </label>
              <label class="admin-field">
                대출잔액 (원)
                <input
                  type="text"
                  id="statsBalance"
                  data-type="money"
                  class="admin-input"
                  placeholder="예) 1433867500000"
                />
              </label>
            </div>
          </div>

          <!-- [상품유형별 대출잔액] -->
          <div class="admin-card" style="margin-top:12px;">
            <h3 class="admin-subtitle">[상품유형별 대출잔액]</h3>
            <p class="admin-section__desc">
              비율은 전체 <strong>대출잔액 기준 % (0~100)</strong>, 금액은 원 단위로 자동 계산됩니다.
              (베타 홈에서는 조/억/만원으로 자동 포맷됩니다.)
            </p>

            <table class="admin-table">
              <thead>
                <tr>
                  <th>상품유형</th>
                  <th style="text-align:right;">비율 (%)</th>
                  <th style="text-align:right;">대출잔액 (원)</th>
                </tr>
              </thead>
              <tbody id="productRows">
                <tr data-key="부동산담보">
                  <td>부동산담보</td>
                  <td>
                    <input
                      type="number"
                      class="admin-input js-ratio"
                      data-key="부동산담보"
                      min="0" max="100" step="0.1"
                      placeholder="예) 43"
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      class="admin-input js-amount"
                      data-key="부동산담보"
                      data-type="money"
                      readonly
                    />
                  </td>
                </tr>
                <tr data-key="부동산PF">
                  <td>부동산PF</td>
                  <td>
                    <input
                      type="number"
                      class="admin-input js-ratio"
                      data-key="부동산PF"
                      min="0" max="100" step="0.1"
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      class="admin-input js-amount"
                      data-key="부동산PF"
                      data-type="money"
                      readonly
                    />
                  </td>
                </tr>
                <tr data-key="어음·매출채권담보">
                  <td>어음·매출채권담보</td>
                  <td>
                    <input
                      type="number"
                      class="admin-input js-ratio"
                      data-key="어음·매출채권담보"
                      min="0" max="100" step="0.1"
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      class="admin-input js-amount"
                      data-key="어음·매출채권담보"
                      data-type="money"
                      readonly
                    />
                  </td>
                </tr>
                <tr data-key="기타담보(주식 등)">
                  <td>기타담보(주식 등)</td>
                  <td>
                    <input
                      type="number"
                      class="admin-input js-ratio"
                      data-key="기타담보(주식 등)"
                      min="0" max="100" step="0.1"
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      class="admin-input js-amount"
                      data-key="기타담보(주식 등)"
                      data-type="money"
                      readonly
                    />
                  </td>
                </tr>
                <tr data-key="개인신용">
                  <td>개인신용</td>
                  <td>
                    <input
                      type="number"
                      class="admin-input js-ratio"
                      data-key="개인신용"
                      min="0" max="100" step="0.1"
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      class="admin-input js-amount"
                      data-key="개인신용"
                      data-type="money"
                      readonly
                    />
                  </td>
                </tr>
                <tr data-key="법인신용">
                  <td>법인신용</td>
                  <td>
                    <input
                      type="number"
                      class="admin-input js-ratio"
                      data-key="법인신용"
                      min="0" max="100" step="0.1"
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      class="admin-input js-amount"
                      data-key="법인신용"
                      data-type="money"
                      readonly
                    />
                  </td>
                </tr>
              </tbody>
            </table>

            <div class="admin-actions-row" style="margin-top:12px;">
              <button type="button" id="saveOntuStatsBtn" class="admin-primary-btn">
                통계 데이터 저장
              </button>
              <span id="statsSaveStatus" style="font-size:12px;color:#6b7280;"></span>
            </div>
          </div>
        </div>
      </section>

      <!-- 탭 패널: 2) 온투업체 정보 등록 -->
      <section class="beta-section hide"
               id="adminLendersSection"
               data-admin-tab-panel="lenders">
        <div class="beta-section__header">
          <div class="beta-section__title-wrap">
            <span class="icon-dot dot-gold"></span>
            <h2 class="beta-section__title">온투업체 정보 등록 (후추 네비게이션 기준)</h2>
          </div>
        </div>

        <div class="beta-card beta-card--wide">
          <p style="margin:0 0 6px;font-size:13px;color:#4b5563;">
            &ldquo;후추 네비게이션&rdquo;에서 사용할 <strong>온투업체별 취급상품·조건·상담채널</strong>을 설정합니다.
          </p>
          <p style="margin:0 0 12px;font-size:12px;color:#9ca3af;">
            · 제휴업체는 결과 화면에서 상단에 우선 표시됩니다.<br />
            · 부동산담보대출은 <strong>지역·부동산유형·대출종류·최소금액·LTV</strong> 등을 기준으로 매칭되고,<br />
            · 개인신용, 스탁론 등 비부동산 상품군은 <strong>취급 여부 + 제휴 여부</strong>만으로 리스트업 됩니다.
          </p>

          <div class="admin-lenders-layout">
            <!-- 왼쪽: 온투업체 리스트 -->
            <div class="admin-lenders-list-panel">
              <div class="admin-lenders-list-header">
                <h3 class="admin-subtitle" style="margin:0;">온투업체 리스트</h3>
                <button type="button" id="addLenderBtn" class="admin-secondary-btn">
                  + 온투업체 추가
                </button>
              </div>
              <p class="admin-section__desc" style="margin-bottom:6px;">
                · 정렬순서는 네비게이션 결과 화면에서의 기본 노출 순서를 의미합니다.<br />
                · &ldquo;제휴업체&rdquo;는 항상 비제휴업체보다 상단에 노출됩니다.
              </p>
              <div id="lendersList" class="admin-lenders-list">
                <!-- JS 에서 lender-row 들이 렌더링됨 -->
              </div>
            </div>

            <!-- 오른쪽: 상세 설정 -->
            <div class="admin-lenders-detail-panel">
              <h3 class="admin-subtitle" style="margin:0 0 6px;">상세 설정</h3>
              <p class="admin-section__desc" style="margin-bottom:8px;">
                왼쪽 온투업체 행의 &ldquo;상세 설정&rdquo; 버튼을 클릭하면 여기에 상세 설정 폼이 표시됩니다.
              </p>
              <div id="lenderDetailPanel" class="admin-lenders-detail">
                <!-- JS 에서 lender-detail 들이 렌더링됨 -->
              </div>

              <div class="admin-actions-row" style="margin-top:16px;">
                <button type="button" id="saveLendersBtn" class="admin-primary-btn">
                  온투업체 설정 저장
                </button>
                <span id="lendersSaveStatus" style="font-size:12px;color:#6b7280;"></span>
              </div>
              <p class="admin-section__desc" style="margin-top:6px;font-size:11px;color:#9ca3af;">
                ※ 저장 시 서버 API 및 브라우저 <code>localStorage</code>에 동시에 반영됩니다.
              </p>
            </div>
          </div>
        </div>
      </section>

    </div>
  </main>

  <footer class="beta-footer" role="contentinfo">
    <div class="beta-footer__top">
      <a href="/company.html">회사소개</a>
      <a href="/terms.html">서비스이용약관</a>
      <a href="/privacy.html">개인정보 취급방침</a>
    </div>
    <div class="beta-footer__bottom">
      <div class="beta-footer__brand">
        <img src="/assets/logo/huchu-logo-white.png"
             alt="HUCHU 로고"
             class="beta-footer__logo-img" />
        <span class="beta-footer__logo-text">HUCHU</span>
      </div>
      <div class="beta-footer__info">
        <p>상호: (예시) 후추랩 | 대표: 장현성</p>
        <p>주소: (예시) 경기도 고양시 일산동구 00로 00</p>
        <p>E-MAIL: huchudb01@gmail.com | 사업자번호: 000-00-00000</p>
        <p>2025 © HUCHU. ALL RIGHTS RESERVED.</p>
      </div>
    </div>
  </footer>

</body>
</html>
